<?phpclass tuvan extends MY_Controller{    protected $_gallery_path = "";    protected $_gallery_url = "";	public function __construct(){		parent::__construct();        $this->_data['now'] = 'Tin Tức';        $this->load->model('mtuvan');        $this->load->model('mconfig');        $user = $this->session->userdata('user');        if(!$user || $user['user_type'] != 'administrator'){            if($user['user_type']=='nhanvien'){                redirect(base_url()."admin/product/phieubanhang");             }            else                redirect(base_url()."admin/login");        }        $this->form_validation->CI =& $this;        //--------        //Lấy đường dẫn url của thư mục chứa hình ảnh được upload        $this->_gallery_url = base_url()."public/default/tintuc/";        //Lấy đường dẫn vật lý của thư mục chứa hình ảnh đươc upload        $this->_gallery_path = realpath(APPPATH. "../public/default/tintuc");	}	public function listall(){        if(!isset($_GET['per_page'])){            $start = 0 ;        }else{            $start=$_GET['per_page'];        }		$this->load->library('pagination');		$config['base_url'] = base_url().'admin/tuvan/listall?';		//config phân trang		$config['total_rows'] = $this->mtuvan->numRows();		$config['per_page'] =8;		$config['uri_segment'] = 4;		$config['cur_tag_open'] = "<li><a><font color='black'>";		$config['cur_tag_close'] = '</font></a></li>';		$config['num_tag_open'] = '<li>';		$config['num_tag_close'] = '</li>';		$config['prev_link'] = 'Prev';		$config['prev_tag_open'] = '<li>';		$config['prev_tag_close'] = '</li>';		$config['next_link'] = 'Next';		$config['next_tag_open'] = '<li>';		$config['next_tag_close'] = '</li>';		$config['first_tag_open'] = '<li>';		$config['first_tag_close'] = '</li>';		$config['last_tag_open'] = '<li>';		$config['last_tag_close'] = '</li>';		$this->pagination->initialize($config);		$this->_data['pagination']=$this->pagination->create_links();		$this->_data['template'] = 'admin/tuvan/list_view';		$this->_data['title'] = 'Trang Quản Lý Danh Mục ';		$this->_data['info'] = $this->mtuvan->listAll($config['per_page'],$start);		$this->load->view("layout/admin",$this->_data);	}	public function add(){        $this->_data['action'] = strtolower(__FUNCTION__);		if(isset($_POST['ok'])){            $this->form_validation->set_rules("quest","Câu Hỏi","trim|required");            $this->form_validation->set_rules("answer","Trả Lời","trim|required");			if($this->form_validation->run()==TRUE){				$arr = array(					'quest' => $this->input->post('quest'),					'answer' => $this->input->post('answer'),					'created' => time(),					);				$this->mtuvan->add($arr);				$this->session->set_flashdata('ses_flash',"Thêm");				redirect(base_url()."admin/tuvan/listall");			}		}		$this->_data['template'] = 'admin/tuvan/modify_view';		$this->_data['title'] = 'Trang Thêm Thực Đơn ';		$this->load->view("layout/admin",$this->_data);	}	public function del($id){		$this->mtuvan->del($id);		$this->session->set_flashdata('ses_flash',"Xóa");		redirect(base_url()."admin/tuvan/listall");	}	public function edit($id){        $this->_data['action'] = strtolower(__FUNCTION__);		if(isset($_POST['ok'])){            $this->form_validation->set_rules("quest","Câu Hỏi","trim|required");            $this->form_validation->set_rules("answer","Trả Lời","trim|required");            if($this->form_validation->run()==TRUE){                $arr = array(                    'quest' => $this->input->post('quest'),                    'answer' => $this->input->post('answer'),                );				$this->mtuvan->editById($id,$arr);				$this->session->set_flashdata('ses_flash',"Sửa");				redirect(base_url()."admin/tuvan/listall");			}		}		$this->_data['info'] = $this->mtuvan->getById($id);		$this->_data['template'] = 'admin/tuvan/modify_view';		$this->_data['title'] = 'Trang Sửa User ';		$this->load->view("layout/admin",$this->_data);	}    public function desc(){        $this->_data['template'] = 'admin/tuvan/desc';        $this->_data['name'] = 'Giới Thiệu Tin Tức ';        $this->_data['data'] = $this->mconfig->getByKey('desc_tintuc');        $this->load->view("layout/admin",$this->_data);    }}