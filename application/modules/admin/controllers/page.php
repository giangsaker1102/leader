<?phpclass page extends MY_Controller{    protected $_gallery_path = "";    protected $_gallery_url = "";	public function __construct(){		parent::__construct();        $this->_data['now'] = 'Quản Lý Các Trang';        $this->load->model('mpage');        $this->load->model('mconfig');        $user = $this->session->userdata('user');        if(!$user || $user['user_type'] != 'administrator'){            if($user['user_type']=='nhanvien'){                redirect(base_url()."admin/product/phieubanhang");             }            else                redirect(base_url()."admin/login");        }        $this->form_validation->CI =& $this;        //Lấy đường dẫn url của thư mục chứa hình ảnh được upload        $this->_gallery_url = base_url()."public/page/";        //Lấy đường dẫn vật lý của thư mục chứa hình ảnh đươc upload        $this->_gallery_path = realpath(APPPATH. "../public/page");	}	public function info($code){        $this->_data['action'] = strtolower(__FUNCTION__);		if(isset($_POST['ok'])){            if($_FILES['hinhanh']['name'][0]==''){                $arr = array(                    'content' => $this->input->post('content'),                    'title' => $this->input->post('title'),                    'desc' => $this->input->post('desc'),                    'keyword' => $this->input->post('keyword'),                );                $this->mpage->editByCode($code,$arr);                $this->session->set_flashdata('ses_flash',"Sửa");            }            else{                $config = array('upload_path'   => $this->_gallery_path,                    'allowed_types' => 'gif|jpg|png|jpeg',                    'max_size'      => '2000');                $this->load->library("upload",$config);                if(!$this->upload->do_multi_upload("hinhanh")){                }else{                   $data =$this->upload->get_multi_upload_data() ;                    $images  = array();                    foreach($data as $val){                        $images[] = $val['file_name'];                    }                    $data_images = json_encode($images);                    $arr = array(                        'content' => $this->input->post('content'),                        'title' => $this->input->post('title'),                        'desc' => $this->input->post('desc'),                        'keyword' => $this->input->post('keyword'),                        'hinhanh'=>$data_images                    );                    $this->mpage->editByCode($code,$arr);                    $this->session->set_flashdata('ses_flash',"Sửa");                }            }		}		$this->_data['info'] = $this->mpage->getByCode($code);		$this->_data['template'] = 'admin/page/modify_view';		$this->_data['title'] = 'Trang Sửa User ';		$this->load->view("layout/admin",$this->_data);    }}