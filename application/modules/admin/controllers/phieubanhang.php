<?phpclass phieubanhang extends MY_Controller{    public function __construct(){        parent::__construct();        $this->_data['now'] = 'Phiếu Bán Hàng';        $this->load->model('mphieubanhang');        $this->load->model('mconfig');        $user = $this->session->userdata('user');        if(!$user || $user['user_type'] != 'administrator'){            if($user['user_type']!='nhanvien'){                redirect(base_url()."admin/product/phieubanhang");               }        }        $this->form_validation->CI =& $this;    }    public function listall(){        if(!isset($_GET['per_page'])){            $start = 0 ;        }else{            $start=$_GET['per_page'];        }        $this->load->library('pagination');        $config['base_url'] = base_url().'admin/phieubanhang/listall?';        //config phân trang        $config['total_rows'] = $this->mphieubanhang->numRows();        $config['per_page'] =15;        $config['uri_segment'] = 4;        $config['cur_tag_open'] = "<li><a><font color='black'>";        $config['cur_tag_close'] = '</font></a></li>';        $config['num_tag_open'] = '<li>';        $config['num_tag_close'] = '</li>';        $config['prev_link'] = 'Prev';        $config['prev_tag_open'] = '<li>';        $config['prev_tag_close'] = '</li>';        $config['next_link'] = 'Next';        $config['next_tag_open'] = '<li>';        $config['next_tag_close'] = '</li>';        $config['first_tag_open'] = '<li>';        $config['first_tag_close'] = '</li>';        $config['last_tag_open'] = '<li>';        $config['last_tag_close'] = '</li>';        $this->pagination->initialize($config);        $this->_data['pagination']=$this->pagination->create_links();        $this->_data['template'] = 'admin/phieubanhang/list_view';        $this->_data['title'] = 'Trang Quản Lý Danh Mục ';        $this->_data['info'] = $this->mphieubanhang->listAll($config['per_page'],$start);        $this->load->view("layout/admin",$this->_data);    }    public function search(){        if(!isset($_GET['per_page'])){            $start = 0 ;        }else{            $start=$_GET['per_page'];        }        if($_GET['dstart']==''){            $dstart = '' ;        }else{            $dstart=$_GET['dstart'];        }        if($_GET['dend']==''){            $dend = '' ;        }else{            $dend=$_GET['dend'];        }        if(!isset($_GET['mapt'])){            $mapt = '' ;        }else{            $mapt=$_GET['mapt'];        }        $this->_data['dstart'] = $dstart;        $this->_data['dend'] = $dend;        $this->_data['mapt'] = $mapt;        $this->load->library('pagination');        $config['base_url'] = base_url().'admin/phieubanhang/search?dstart='.$dstart."&dend=".$dend."&mapt=".$mapt;        //config phân trang        $config['total_rows'] = $this->mphieubanhang->numRows($dstart,$dend,$mapt);        $config['per_page'] =15;        $config['uri_segment'] = 4;        $config['cur_tag_open'] = "<li><a><font color='black'>";        $config['cur_tag_close'] = '</font></a></li>';        $config['num_tag_open'] = '<li>';        $config['num_tag_close'] = '</li>';        $config['prev_link'] = 'Prev';        $config['prev_tag_open'] = '<li>';        $config['prev_tag_close'] = '</li>';        $config['next_link'] = 'Next';        $config['next_tag_open'] = '<li>';        $config['next_tag_close'] = '</li>';        $config['first_tag_open'] = '<li>';        $config['first_tag_close'] = '</li>';        $config['last_tag_open'] = '<li>';        $config['last_tag_close'] = '</li>';        $this->pagination->initialize($config);        $this->_data['pagination']=$this->pagination->create_links();        $this->_data['template'] = 'admin/phieubanhang/list_view';        $this->_data['title'] = 'Trang Quản Lý Danh Mục ';        $this->_data['info'] = $this->mphieubanhang->search($config['per_page'],$start,$dstart,$dend,$mapt );        $this->load->view("layout/admin",$this->_data);    }    public function del($id){        $this->mphieubanhang->del($id);        $this->session->set_flashdata('ses_flash',"Xóa");        redirect(base_url()."admin/phieubanhang/listall");    }    public function dellist(){        foreach($_POST['del'] as $id){            $this->mphieubanhang->del($id);        }        $this->session->set_flashdata('ses_flash',"Xóa");        redirect(base_url()."admin/phieubanhang/listall");    }    public function detail($id){        $this->_data['info'] = $this->mphieubanhang->getByID($id);        $this->load->view("admin/phieubanhang/detail",$this->_data);    }}