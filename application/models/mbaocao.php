<?phpclass mbaocao extends CI_Model{    public function __construct(){        parent::__construct();    }    public function search($dstart,$dend,$table){        $this->db->select("$table.id as ID,$table.date as 'Ngày Lập',$table.mapt as 'Mã Phiếu',customers.name as 'Tên Khách Hàng',$table.total as 'Tổng',$table.vat as 'VAT', $table.giamgia as 'Giảm Giá', ($table.total+$table.vat-$table.giamgia) as 'Còn Lại', users.name as 'Người Bán'");        $this->db->join("customers","$table.customer_id = customers.id");        $this->db->join("users","$table.seller = users.user_id");        if($dstart !='' && $dend != ''){            $astart = explode('-',$dstart);            $dstart = $astart[2].'-'.$astart[1].'-'.$astart[0];            $aend = explode('-',$dend);            $dend = $aend[2].'-'.$aend[1].'-'.$aend[0];            $this->db->where("date BETWEEN '$dstart' AND '$dend' ");        }        $this->db->order_by('id','desc');        return $this->db->get($table);    }    public function info($dstart,$dend,$table){        $this->db->select("$table.*,customers.name");        $this->db->join("customers","$table.customer_id = customers.id");        if($dstart !='' && $dend != ''){            $astart = explode('-',$dstart);            $dstart = $astart[2].'-'.$astart[1].'-'.$astart[0];            $aend = explode('-',$dend);            $dend = $aend[2].'-'.$aend[1].'-'.$aend[0];            $this->db->where("date BETWEEN '$dstart' AND '$dend' ");        }        $this->db->order_by('id','desc');        return $this->db->get($table)->result_array();    }    function returnDates($fromdate, $todate) {        $fromdate = \DateTime::createFromFormat('d-m-Y', $fromdate);        $todate = \DateTime::createFromFormat('d-m-Y', $todate);        return new \DatePeriod(            $fromdate,            new \DateInterval('P1D'),            $todate->modify('+1 day')        );    }        function sumMoneybyDate($date){        $this->db->select('(SUM(phieubanhang.total)-SUM(phieubanhang.giamgia)+SUM(phieubanhang.vat)) as money');        $this->db->join("customers","phieubanhang.customer_id = customers.id");        if($date !=''){            $astart = explode('-',$date);            $date = $astart[2].'-'.$astart[1].'-'.$astart[0];            $this->db->where("date",$date);        }        return $this->db->get('phieubanhang')->row()->money;    }        public function info2($table='phieubanhang'){        $this->db->select("$table.*,customers.name, (SUM(phieubanhang.total)-SUM(phieubanhang.giamgia)+SUM(phieubanhang.vat)) as money");        $this->db->join("customers","$table.customer_id = customers.id");        $this->db->order_by('id','asc');        $this->db->group_by('date');        return $this->db->get($table)->result_array();    }}